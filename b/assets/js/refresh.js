let startY=0,isAtTop=!1,refreshMessage=document.getElementById("refreshMessage");window.addEventListener("touchstart",(e=>{isAtTop=0===document.documentElement.scrollTop,isAtTop&&(startY=e.touches[0].clientY)})),window.addEventListener("touchmove",(e=>{if(!isAtTop)return;const s=e.touches[0].clientY-startY;s>0&&(s>.2*window.innerHeight?refreshMessage.innerHTML="<p>释放以刷新页面</p>":s>.01*window.innerHeight&&(refreshMessage.innerHTML="<p>继续下拉，刷新页面...</p>",refreshMessage.classList.add("visible"),refreshMessage.classList.remove("hidden")))})),window.addEventListener("touchend",(e=>{if(isAtTop&&startY){if(e.changedTouches[0].clientY-startY>.2*window.innerHeight){const e=new URL(window.location.href),s=new Date,t=s.getFullYear()+("0"+(s.getMonth()+1)).slice(-2)+("0"+s.getDate()).slice(-2)+("0"+s.getHours()).slice(-2)+("0"+s.getMinutes()).slice(-2)+("0"+s.getSeconds()).slice(-2);return e.searchParams.set("v",t),void(window.location.href=e.toString())}refreshMessage.classList.add("hidden"),refreshMessage.classList.remove("visible")}}));